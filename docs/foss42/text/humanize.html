<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.6">
<title>foss42.text.humanize API documentation</title>
<meta name="description" content="">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>foss42.text.humanize</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="foss42.text.humanize.humanize_bytes"><code class="name flex">
<span>def <span class="ident">humanize_bytes</span></span>(<span>num: int | str,<br>digits: int = 0,<br>prefix: bool = False,<br>add_space: bool = True,<br>trailing_zeros: bool = False) ‑> str</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def humanize_bytes(num: int | str, 
                   digits: int = 0,
                   prefix: bool = False,
                   add_space: bool = True,
                   trailing_zeros: bool = False) -&gt; str:
    &#34;&#34;&#34;
    Turns `num` bytes into a human readable format.  
    `digits` specify the max. number of digits after the decimal (default `0`).
    If `trailing_zeros` is False (default), all trailing zeros to the right of the decimal point are removed.
    For example, if the final result is 1.10 MB, the trailing 0 is removed and 1.1 MB is returned.
    If `prefix` is `True` then SI prefixes (kilobytes, megabytes, gigabytes, etc.) are used instead of the symbols.  
    `add_space` (default `True`) can be used to specify whether a space should be added between the number and the unit (1 MB or 1MB). 

    &gt;&gt;&gt; humanize_bytes(128991)
    &#39;126 KB&#39;
    &gt;&gt;&gt; humanize_bytes(100001221)
    &#39;95 MB&#39;
    &gt;&gt;&gt; humanize_bytes(0, 2)
    &#39;0 B&#39;
    &gt;&gt;&gt; humanize_bytes(1, 3) # No decimal 0s as they are not significant.
    &#39;1 B&#39;
    &gt;&gt;&gt; humanize_bytes(1024, add_space = False)                   
    &#39;1KB&#39;
    &gt;&gt;&gt; humanize_bytes(24117248, 0, add_space = False)
    &#39;23MB&#39;
    &gt;&gt;&gt; humanize_bytes(664365320, 2)
    &#39;633.59 MB&#39;
    &gt;&gt;&gt; humanize_bytes(4324324232343, 2, add_space = False)
    &#39;3.93TB&#39;
    &gt;&gt;&gt; humanize_bytes(664365320, 4)
    &#39;633.5881 MB&#39;
    &gt;&gt;&gt; humanize_bytes(4324324232343, 3)
    &#39;3.933 TB&#39;
    &gt;&gt;&gt; humanize_bytes(128991, prefix = True)
    &#39;126 kilobytes&#39;
    &gt;&gt;&gt; humanize_bytes(100001221, prefix = True)
    &#39;95 megabytes&#39;
    &gt;&gt;&gt; humanize_bytes(1126, 2, prefix = True)
    &#39;1.1 kilobytes&#39;
    &gt;&gt;&gt; humanize_bytes(1126, 2, prefix = True, trailing_zeros = True)
    &#39;1.10 kilobytes&#39;
    &gt;&gt;&gt; humanize_bytes(&#39;abc&#39;)
    Traceback (most recent call last):
        ...
    ValueError: num should be a valid number.
    &gt;&gt;&gt; humanize_bytes(-10)
    Traceback (most recent call last):
        ...
    ValueError: num cannot be less than 0.
    &#34;&#34;&#34;

    try:
        num = int(num) if type(num) is str else num
    except Exception as e:
        raise ValueError(&#34;num should be a valid number.&#34;)
    symbol = SIZE_SYMBOLS[0]
    units = &#34;bytes&#34;
    if num &lt; 0:
        raise ValueError(&#34;num cannot be less than 0.&#34;)
    elif num == 0:
        res = 0
    else:
        p = math.floor(math.log2(num)/10)
        p = len(SIZE_SYMBOLS) if p &gt; len(SIZE_SYMBOLS) else p
        symbol = SIZE_SYMBOLS[p]
        units = METRIC_PREFIX[3*p][0] + units
        res = num/1024**p
    if prefix: symbol = units
    if add_space: symbol = f&#34; {symbol}&#34;
    result = f&#39;{res:.{digits}f}&#39;
    if not trailing_zeros:
        result = remove_trailing_zeros(result)
    return  f&#34;{result}{symbol}&#34;</code></pre>
</details>
<div class="desc"><p>Turns <code>num</code> bytes into a human readable format.<br>
<code>digits</code> specify the max. number of digits after the decimal (default <code>0</code>).
If <code>trailing_zeros</code> is False (default), all trailing zeros to the right of the decimal point are removed.
For example, if the final result is 1.10 MB, the trailing 0 is removed and 1.1 MB is returned.
If <code>prefix</code> is <code>True</code> then SI prefixes (kilobytes, megabytes, gigabytes, etc.) are used instead of the symbols.<br>
<code>add_space</code> (default <code>True</code>) can be used to specify whether a space should be added between the number and the unit (1 MB or 1MB). </p>
<pre><code class="language-python-repl">&gt;&gt;&gt; humanize_bytes(128991)
'126 KB'
&gt;&gt;&gt; humanize_bytes(100001221)
'95 MB'
&gt;&gt;&gt; humanize_bytes(0, 2)
'0 B'
&gt;&gt;&gt; humanize_bytes(1, 3) # No decimal 0s as they are not significant.
'1 B'
&gt;&gt;&gt; humanize_bytes(1024, add_space = False)                   
'1KB'
&gt;&gt;&gt; humanize_bytes(24117248, 0, add_space = False)
'23MB'
&gt;&gt;&gt; humanize_bytes(664365320, 2)
'633.59 MB'
&gt;&gt;&gt; humanize_bytes(4324324232343, 2, add_space = False)
'3.93TB'
&gt;&gt;&gt; humanize_bytes(664365320, 4)
'633.5881 MB'
&gt;&gt;&gt; humanize_bytes(4324324232343, 3)
'3.933 TB'
&gt;&gt;&gt; humanize_bytes(128991, prefix = True)
'126 kilobytes'
&gt;&gt;&gt; humanize_bytes(100001221, prefix = True)
'95 megabytes'
&gt;&gt;&gt; humanize_bytes(1126, 2, prefix = True)
'1.1 kilobytes'
&gt;&gt;&gt; humanize_bytes(1126, 2, prefix = True, trailing_zeros = True)
'1.10 kilobytes'
&gt;&gt;&gt; humanize_bytes('abc')
Traceback (most recent call last):
    ...
ValueError: num should be a valid number.
&gt;&gt;&gt; humanize_bytes(-10)
Traceback (most recent call last):
    ...
ValueError: num cannot be less than 0.
</code></pre></div>
</dd>
<dt id="foss42.text.humanize.humanize_rank"><code class="name flex">
<span>def <span class="ident">humanize_rank</span></span>(<span>num: int | str) ‑> str</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def humanize_rank(num: int | str) -&gt; str:
    &#34;&#34;&#34;
    Covert a number provided as an interger or string into its ordinal form that indicates the exact position or rank in a leaderboard. 

    &gt;&gt;&gt; humanize_rank(0)
    &#39;0th&#39;
    &gt;&gt;&gt; humanize_rank(&#39;1&#39;)
    &#39;1st&#39;
    &gt;&gt;&gt; humanize_rank(2)
    &#39;2nd&#39;
    &gt;&gt;&gt; humanize_rank(3)
    &#39;3rd&#39;
    &gt;&gt;&gt; [humanize_rank(5), humanize_rank(61), humanize_rank(80)]
    [&#39;5th&#39;, &#39;61st&#39;, &#39;80th&#39;]
    &gt;&gt;&gt; [humanize_rank(112), humanize_rank(120), humanize_rank(1101)]
    [&#39;112th&#39;, &#39;120th&#39;, &#39;1101st&#39;]
    &gt;&gt;&gt; [humanize_rank(11), humanize_rank(12), humanize_rank(13)]
    [&#39;11th&#39;, &#39;12th&#39;, &#39;13th&#39;]
    &gt;&gt;&gt; humanize_rank(&#39;abc&#39;)
    Traceback (most recent call last):
        ...
    ValueError: num should be a valid number.
    &gt;&gt;&gt; humanize_rank(-10)
    Traceback (most recent call last):
        ...
    ValueError: num cannot be less than 0.
    &#34;&#34;&#34;

    try: 
        num = int(num) if type(num) is str else num
    except Exception as e:
        raise ValueError(&#34;num should be a valid number.&#34;)
    
    if num &lt; 0:
        raise ValueError(&#34;num cannot be less than 0.&#34;)

    if num%100 in (11, 12, 13):
        return f&#34;{num}th&#34;
    else:
        return f&#34;{num}{NUM_ORDS_SHORT[num%10]}&#34;</code></pre>
</details>
<div class="desc"><p>Covert a number provided as an interger or string into its ordinal form that indicates the exact position or rank in a leaderboard. </p>
<pre><code class="language-python-repl">&gt;&gt;&gt; humanize_rank(0)
'0th'
&gt;&gt;&gt; humanize_rank('1')
'1st'
&gt;&gt;&gt; humanize_rank(2)
'2nd'
&gt;&gt;&gt; humanize_rank(3)
'3rd'
&gt;&gt;&gt; [humanize_rank(5), humanize_rank(61), humanize_rank(80)]
['5th', '61st', '80th']
&gt;&gt;&gt; [humanize_rank(112), humanize_rank(120), humanize_rank(1101)]
['112th', '120th', '1101st']
&gt;&gt;&gt; [humanize_rank(11), humanize_rank(12), humanize_rank(13)]
['11th', '12th', '13th']
&gt;&gt;&gt; humanize_rank('abc')
Traceback (most recent call last):
    ...
ValueError: num should be a valid number.
&gt;&gt;&gt; humanize_rank(-10)
Traceback (most recent call last):
    ...
ValueError: num cannot be less than 0.
</code></pre></div>
</dd>
<dt id="foss42.text.humanize.humanize_social"><code class="name flex">
<span>def <span class="ident">humanize_social</span></span>(<span>num: int | str,<br>digits: int = 1,<br>system: str = 'NA',<br>add_space: bool = False,<br>trailing_zeros: bool = False) ‑> str</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def humanize_social(num: int | str, 
                    digits: int = 1, 
                    system: str = &#34;NA&#34;,
                    add_space: bool = False,
                    trailing_zeros: bool = False) -&gt; str:
    &#34;&#34;&#34;
    Returns a human readable version of social media numbers like number of followers, shares, likes, etc.
    `digits` specify the max. number of digits after the decimal (default `1`).
    If `trailing_zeros` is False (default), all trailing zeros to the right of the decimal point are removed.
    For example, if the final result is 1.10, the trailing 0 is removed and 1.1 is returned.  
    `add_space` (default `False`) can be used to specify whether a space should be added between the number and the unit (1 K or 1K).
    `system` can be &#34;NA&#34; (default), &#34;UK&#34; or &#34;SS&#34; to switch between US abbreviation (&#34;K&#34;, &#34;M&#34;, &#34;B&#34;, &#34;T&#34;), UK abbreviation (&#34;k&#34;, &#34;m&#34;, &#34;bn&#34;, &#34;tn&#34;) or SS - Short Scale (&#34;thousand&#34;, &#34;million&#34;, &#34;billion&#34;, &#34;trillion)  system.
    If `num` is greater than trillion, it is specified in trillions no matter how large the amount.

    &gt;&gt;&gt; humanize_social(3456)
    &#39;3.5K&#39;
    &gt;&gt;&gt; humanize_social(3456, 0)
    &#39;3K&#39;
    &gt;&gt;&gt; humanize_social(3456, 2)
    &#39;3.46K&#39;
    &gt;&gt;&gt; humanize_social(3456, add_space = True)
    &#39;3.5 K&#39;
    &gt;&gt;&gt; humanize_social(3456, system = &#34;UK&#34;, add_space = True)
    &#39;3.5 k&#39;
    &gt;&gt;&gt; humanize_social(345, 2)
    &#39;345&#39;
    &gt;&gt;&gt; humanize_social(0)
    &#39;0&#39;
    &gt;&gt;&gt; humanize_social(10000000)
    &#39;10M&#39;
    &gt;&gt;&gt; humanize_social(2000000000, system = &#34;UK&#34;)
    &#39;2bn&#39;
    &gt;&gt;&gt; humanize_social(2200000000, system = &#34;SS&#34;, add_space = True)
    &#39;2.2 billion&#39;
    &gt;&gt;&gt; humanize_social(30000000000000)
    &#39;30T&#39;
    &gt;&gt;&gt; humanize_social(11500)
    &#39;11.5K&#39;
    &gt;&gt;&gt; humanize_social(11500, digits = 2)
    &#39;11.5K&#39;
    &gt;&gt;&gt; humanize_social(11500, digits = 2, trailing_zeros = True)
    &#39;11.50K&#39;
    &gt;&gt;&gt; humanize_social(1070)
    &#39;1.1K&#39;
    &gt;&gt;&gt; humanize_social(&#39;abc&#39;)
    Traceback (most recent call last):
        ...
    ValueError: num should be a valid number.
    &gt;&gt;&gt; humanize_social(-10)
    Traceback (most recent call last):
        ...
    ValueError: num cannot be less than 0.
    &gt;&gt;&gt; humanize_social(10, system = &#34;PO&#34;)
    Traceback (most recent call last):
        ...
    ValueError: Permitted Values of system are  [&#39;NA&#39;, &#39;UK&#39;, &#39;SS&#39;].
    &#34;&#34;&#34;

    try:
        num = int(num) if type(num) is str else num
    except Exception as e:
        raise ValueError(&#34;num should be a valid number.&#34;)    
    if system not in ABBR_NUM:
        raise ValueError(f&#34;Permitted Values of system are {list(ABBR_NUM.keys())}.&#34;)
    symbol = ABBR_NUM[system][0]
    if num &lt; 0:
        raise ValueError(&#34;num cannot be less than 0.&#34;)
    elif num == 0:
        res = 0
    else:
        p = math.floor(math.log10(num))
        for l, g in ABBR_SIZES:
            if l &lt;= p &lt; g:
                p = l
        symbol = ABBR_NUM[system][p]
        res = num/10**p
    if add_space: symbol = f&#34; {symbol}&#34;
    result = f&#39;{res:.{digits}f}&#39;
    if not trailing_zeros:
        result = remove_trailing_zeros(result)
    return  f&#34;{result}{symbol}&#34;</code></pre>
</details>
<div class="desc"><p>Returns a human readable version of social media numbers like number of followers, shares, likes, etc.
<code>digits</code> specify the max. number of digits after the decimal (default <code>1</code>).
If <code>trailing_zeros</code> is False (default), all trailing zeros to the right of the decimal point are removed.
For example, if the final result is 1.10, the trailing 0 is removed and 1.1 is returned.<br>
<code>add_space</code> (default <code>False</code>) can be used to specify whether a space should be added between the number and the unit (1 K or 1K).
<code>system</code> can be "NA" (default), "UK" or "SS" to switch between US abbreviation ("K", "M", "B", "T"), UK abbreviation ("k", "m", "bn", "tn") or SS - Short Scale ("thousand", "million", "billion", "trillion)
system.
If <code>num</code> is greater than trillion, it is specified in trillions no matter how large the amount.</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; humanize_social(3456)
'3.5K'
&gt;&gt;&gt; humanize_social(3456, 0)
'3K'
&gt;&gt;&gt; humanize_social(3456, 2)
'3.46K'
&gt;&gt;&gt; humanize_social(3456, add_space = True)
'3.5 K'
&gt;&gt;&gt; humanize_social(3456, system = &quot;UK&quot;, add_space = True)
'3.5 k'
&gt;&gt;&gt; humanize_social(345, 2)
'345'
&gt;&gt;&gt; humanize_social(0)
'0'
&gt;&gt;&gt; humanize_social(10000000)
'10M'
&gt;&gt;&gt; humanize_social(2000000000, system = &quot;UK&quot;)
'2bn'
&gt;&gt;&gt; humanize_social(2200000000, system = &quot;SS&quot;, add_space = True)
'2.2 billion'
&gt;&gt;&gt; humanize_social(30000000000000)
'30T'
&gt;&gt;&gt; humanize_social(11500)
'11.5K'
&gt;&gt;&gt; humanize_social(11500, digits = 2)
'11.5K'
&gt;&gt;&gt; humanize_social(11500, digits = 2, trailing_zeros = True)
'11.50K'
&gt;&gt;&gt; humanize_social(1070)
'1.1K'
&gt;&gt;&gt; humanize_social('abc')
Traceback (most recent call last):
    ...
ValueError: num should be a valid number.
&gt;&gt;&gt; humanize_social(-10)
Traceback (most recent call last):
    ...
ValueError: num cannot be less than 0.
&gt;&gt;&gt; humanize_social(10, system = &quot;PO&quot;)
Traceback (most recent call last):
    ...
ValueError: Permitted Values of system are  ['NA', 'UK', 'SS'].
</code></pre></div>
</dd>
<dt id="foss42.text.humanize.humanize_time"><code class="name flex">
<span>def <span class="ident">humanize_time</span></span>(<span>dt: str | datetime.datetime,<br>dt_ref: str | datetime.datetime | None = None,<br>fmt: str | None = None,<br>units: str = 'FULL',<br>cutoff_now: int = 1,<br>add_adverb: bool = False,<br>use_article: bool = False,<br>round_down: bool = True) ‑> str</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def humanize_time(dt: str | datetime,
                  dt_ref: Optional[str | datetime] = None, 
                  fmt: Optional[str] = None,
                  units: str = &#34;FULL&#34;, 
                  cutoff_now: int = 1,
                  add_adverb: bool = False,
                  use_article: bool = False,
                  round_down: bool = True) -&gt; str:
    &#34;&#34;&#34;
    Returns a time difference in human readable verison as typically displayed in social media.
    eg: .. minutes ago, .. days ago, .. hours from now, etc.
    `dt` can be a `datetime.datetime` object or a valid ISO 8601 format string.
    `dt_ref` can be used to supply a base time. The current system timestamp is used if it is `None`.
    `fmt` can be used to provide the format of the timestamp if it is not in a valid ISO 8601 format.
    Check https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes to learn more about formatting date strings.
    `units` can be &#34;FULL&#34; (default) or &#34;SHORT&#34;
    `cutoff_now` is the number of seconds of time difference for which &#34;now&#34; is returned instead of the actual time difference. Default is set as `1` which means that any time difference less than a second is returned as &#34;now&#34; instead of the time difference in milliseconds.
    `add_adverb` if `True` (default is `False`), adds &#34;ago&#34; or &#34;from now&#34; based on the time difference.
    `use_article` if `True` (default is `False`), uses article &#34;a&#34; and &#34;an&#34; instead of &#34;1&#34;. For example, &#34;a minute ago&#34; instead of &#34;1 minute ago&#34;.
    `round_down` if True (default), rounds the time difference to the largest unit quantity that is less than or equal to it. For example, &#34;1 week, 2 days&#34; becomes &#34;1 week&#34;. If turned `False`, &#34;1 week, 2 days&#34; still returns &#34;1 week&#34;, but &#34;1 week, 5 days&#34; returns &#34;2 weeks&#34;.
    
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T16:30:00&#39;, &#39;2008-12-18T16:30:00&#39;)
    &#39;now&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T16:29:31&#39;, &#39;2008-12-18T16:30:00&#39;)
    &#39;29 seconds&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T16:29:31&#39;, &#39;2008-12-18T16:30:00&#39;, add_adverb = True)
    &#39;29 seconds ago&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T16:29:00&#39;, &#39;2008-12-18T16:30:00&#39;, add_adverb = True)
    &#39;1 minute ago&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T16:29:00&#39;, &#39;2008-12-18T16:30:00&#39;, add_adverb = True, use_article = True)
    &#39;a minute ago&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T16:25:35&#39;, &#39;2008-12-18T16:30:00&#39;, units = &#34;SHORT&#34;)
    &#39;4 m&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T15:30:29&#39;, &#39;2008-12-18T16:30:00&#39;)
    &#39;59 minutes&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T15:30:01&#39;, &#39;2008-12-18T16:30:00&#39;)
    &#39;59 minutes&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T15:30:01&#39;, &#39;2008-12-18T16:30:00&#39;, round_down = False)
    &#39;1 hour&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T15:30:01&#39;, &#39;2008-12-18T16:30:00&#39;, units = &#34;SHORT&#34;, round_down = False)
    &#39;1 h&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T15:30:00&#39;, &#39;2008-12-18T16:30:00&#39;, add_adverb = True, use_article = True)
    &#39;an hour ago&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T13:31:29&#39;, &#39;2008-12-18T16:30:00&#39;, add_adverb = True)
    &#39;2 hours ago&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-17T13:31:29&#39;, &#39;2008-12-18T16:30:00&#39;)
    &#39;1 day&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-17T13:30:01&#39;, &#39;2008-12-18T16:30:00&#39;, add_adverb = True)
    &#39;1 day ago&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-17T01:30:00&#39;, &#39;2008-12-18T16:30:00&#39;)
    &#39;1 day&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-17T01:30:00&#39;, &#39;2008-12-18T16:30:00&#39;, round_down = False)
    &#39;2 days&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T16:30:30&#39;, &#39;2008-12-18T16:30:00&#39;, add_adverb = True)
    &#39;30 seconds from now&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T16:30:29&#39;, &#39;2008-12-18T16:30:00&#39;, units = &#34;SHORT&#34;)
    &#39;29 s&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T16:31:00&#39;, &#39;2008-12-18T16:30:00&#39;, add_adverb = True, use_article = True) 
    &#39;a minute from now&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T16:34:35&#39;, &#39;2008-12-18T16:30:00&#39;, add_adverb = True) 
    &#39;4 minutes from now&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T17:30:29&#39;, &#39;2008-12-18T16:30:00&#39;, add_adverb = True, use_article = True) 
    &#39;an hour from now&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-18T18:31:29&#39;, &#39;2008-12-18T16:30:00&#39;, units = &#34;SHORT&#34;, add_adverb = True) 
    &#39;2 h from now&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-19T16:31:29&#39;, &#39;2008-12-18T16:30:00&#39;, add_adverb = True, use_article = True) 
    &#39;1 day from now&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-27T18:31:29&#39;, &#39;2008-12-16T16:30:00&#39;, add_adverb = True, use_article = True) 
    &#39;1 week from now&#39;
    &gt;&gt;&gt; humanize_time(&#39;2008-12-27T18:31:29&#39;, &#39;2008-12-16T16:30:00&#39;, round_down = False, add_adverb = True) 
    &#39;2 weeks from now&#39;
    &gt;&gt;&gt; humanize_time(&#39;2009-12-17T08:31:29&#39;, &#39;2008-12-17T16:30:00&#39;) 
    &#39;1 year&#39;
    &gt;&gt;&gt; humanize_time(&#39;2010-12-17T08:31:29&#39;, &#39;2008-12-17T16:30:00&#39;, units = &#34;SHORT&#34;) 
    &#39;1 y&#39;
    &gt;&gt;&gt; humanize_time(&#39;2010-12-17T08:31:29&#39;, &#39;2008-12-17T16:30:00&#39;, units = &#34;SHORT&#34;, round_down = False) 
    &#39;2 y&#39;
    &gt;&gt;&gt; humanize_time(&#39;2009-12-17T08:31:29Z&#39;, &#39;2009-12-17T16:30:00&#39;) 
    &#39;7 hours&#39;
    &gt;&gt;&gt; humanize_time(&#39;2009-12-17T08:31:29&#39;, &#39;2009-12-17T16:30:00Z&#39;, round_down = False) 
    &#39;8 hours&#39;
    &#34;&#34;&#34;

    dt_val = None
    
    try:
        dt_val = parse_dt(dt, fmt)
        if dt_ref is not None:
            dt_ref = parse_dt(dt_ref, fmt)
        else:
            dt_ref = datetime.now(timezone.utc)
    except Exception as e:
        raise e 
    
    if units not in TIME_UNIT_IDX:
        raise ValueError(f&#34;Permitted Values of units are {list(TIME_UNIT_IDX.keys())}.&#34;)

    diff = (dt_val - dt_ref).total_seconds()
    if math.fabs(diff) &lt; cutoff_now:
        return &#34;now&#34;

    end = &#34;&#34;
    if add_adverb:
        if diff &lt; 0: 
            end = &#34; ago&#34;
        else:
            end = &#34; from now&#34;

    diff = math.fabs(diff)
    idx = None
    symbol = &#34;&#34;
    for i, row in enumerate(TIME_UNIT):
        if row[0] &lt;= diff &lt; row[1]:
            idx = i
            break
    
    p = TIME_UNIT[idx][0]
    res = int(diff/p) if round_down else round(diff/p)
    calc_res = res * p

    # take care of boundary cases
    if (calc_res == TIME_UNIT[idx][1]) or (TIME_UNIT[idx][2] == &#34;w&#34; and res == 52):
        idx += 1
        res = 1

    uIdx = TIME_UNIT_IDX[units]
    symbol = TIME_UNIT[idx][uIdx]

    if res &gt; 1 and units == &#34;FULL&#34;: symbol += &#34;s&#34;

    if use_article:
        if res == 1:
            if p == 1 or p == 60:
                res = &#34;a&#34;
            if p == 60*60:
                res = &#34;an&#34;

    return f&#39;{res} {symbol}{end}&#39;</code></pre>
</details>
<div class="desc"><p>Returns a time difference in human readable verison as typically displayed in social media.
eg: .. minutes ago, .. days ago, .. hours from now, etc.
<code>dt</code> can be a <code>datetime.datetime</code> object or a valid ISO 8601 format string.
<code>dt_ref</code> can be used to supply a base time. The current system timestamp is used if it is <code>None</code>.
<code>fmt</code> can be used to provide the format of the timestamp if it is not in a valid ISO 8601 format.
Check <a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes">https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes</a> to learn more about formatting date strings.
<code>units</code> can be "FULL" (default) or "SHORT"
<code>cutoff_now</code> is the number of seconds of time difference for which "now" is returned instead of the actual time difference. Default is set as <code>1</code> which means that any time difference less than a second is returned as "now" instead of the time difference in milliseconds.
<code>add_adverb</code> if <code>True</code> (default is <code>False</code>), adds "ago" or "from now" based on the time difference.
<code>use_article</code> if <code>True</code> (default is <code>False</code>), uses article "a" and "an" instead of "1". For example, "a minute ago" instead of "1 minute ago".
<code>round_down</code> if True (default), rounds the time difference to the largest unit quantity that is less than or equal to it. For example, "1 week, 2 days" becomes "1 week". If turned <code>False</code>, "1 week, 2 days" still returns "1 week", but "1 week, 5 days" returns "2 weeks".</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; humanize_time('2008-12-18T16:30:00', '2008-12-18T16:30:00')
'now'
&gt;&gt;&gt; humanize_time('2008-12-18T16:29:31', '2008-12-18T16:30:00')
'29 seconds'
&gt;&gt;&gt; humanize_time('2008-12-18T16:29:31', '2008-12-18T16:30:00', add_adverb = True)
'29 seconds ago'
&gt;&gt;&gt; humanize_time('2008-12-18T16:29:00', '2008-12-18T16:30:00', add_adverb = True)
'1 minute ago'
&gt;&gt;&gt; humanize_time('2008-12-18T16:29:00', '2008-12-18T16:30:00', add_adverb = True, use_article = True)
'a minute ago'
&gt;&gt;&gt; humanize_time('2008-12-18T16:25:35', '2008-12-18T16:30:00', units = &quot;SHORT&quot;)
'4 m'
&gt;&gt;&gt; humanize_time('2008-12-18T15:30:29', '2008-12-18T16:30:00')
'59 minutes'
&gt;&gt;&gt; humanize_time('2008-12-18T15:30:01', '2008-12-18T16:30:00')
'59 minutes'
&gt;&gt;&gt; humanize_time('2008-12-18T15:30:01', '2008-12-18T16:30:00', round_down = False)
'1 hour'
&gt;&gt;&gt; humanize_time('2008-12-18T15:30:01', '2008-12-18T16:30:00', units = &quot;SHORT&quot;, round_down = False)
'1 h'
&gt;&gt;&gt; humanize_time('2008-12-18T15:30:00', '2008-12-18T16:30:00', add_adverb = True, use_article = True)
'an hour ago'
&gt;&gt;&gt; humanize_time('2008-12-18T13:31:29', '2008-12-18T16:30:00', add_adverb = True)
'2 hours ago'
&gt;&gt;&gt; humanize_time('2008-12-17T13:31:29', '2008-12-18T16:30:00')
'1 day'
&gt;&gt;&gt; humanize_time('2008-12-17T13:30:01', '2008-12-18T16:30:00', add_adverb = True)
'1 day ago'
&gt;&gt;&gt; humanize_time('2008-12-17T01:30:00', '2008-12-18T16:30:00')
'1 day'
&gt;&gt;&gt; humanize_time('2008-12-17T01:30:00', '2008-12-18T16:30:00', round_down = False)
'2 days'
&gt;&gt;&gt; humanize_time('2008-12-18T16:30:30', '2008-12-18T16:30:00', add_adverb = True)
'30 seconds from now'
&gt;&gt;&gt; humanize_time('2008-12-18T16:30:29', '2008-12-18T16:30:00', units = &quot;SHORT&quot;)
'29 s'
&gt;&gt;&gt; humanize_time('2008-12-18T16:31:00', '2008-12-18T16:30:00', add_adverb = True, use_article = True) 
'a minute from now'
&gt;&gt;&gt; humanize_time('2008-12-18T16:34:35', '2008-12-18T16:30:00', add_adverb = True) 
'4 minutes from now'
&gt;&gt;&gt; humanize_time('2008-12-18T17:30:29', '2008-12-18T16:30:00', add_adverb = True, use_article = True) 
'an hour from now'
&gt;&gt;&gt; humanize_time('2008-12-18T18:31:29', '2008-12-18T16:30:00', units = &quot;SHORT&quot;, add_adverb = True) 
'2 h from now'
&gt;&gt;&gt; humanize_time('2008-12-19T16:31:29', '2008-12-18T16:30:00', add_adverb = True, use_article = True) 
'1 day from now'
&gt;&gt;&gt; humanize_time('2008-12-27T18:31:29', '2008-12-16T16:30:00', add_adverb = True, use_article = True) 
'1 week from now'
&gt;&gt;&gt; humanize_time('2008-12-27T18:31:29', '2008-12-16T16:30:00', round_down = False, add_adverb = True) 
'2 weeks from now'
&gt;&gt;&gt; humanize_time('2009-12-17T08:31:29', '2008-12-17T16:30:00') 
'1 year'
&gt;&gt;&gt; humanize_time('2010-12-17T08:31:29', '2008-12-17T16:30:00', units = &quot;SHORT&quot;) 
'1 y'
&gt;&gt;&gt; humanize_time('2010-12-17T08:31:29', '2008-12-17T16:30:00', units = &quot;SHORT&quot;, round_down = False) 
'2 y'
&gt;&gt;&gt; humanize_time('2009-12-17T08:31:29Z', '2009-12-17T16:30:00') 
'7 hours'
&gt;&gt;&gt; humanize_time('2009-12-17T08:31:29', '2009-12-17T16:30:00Z', round_down = False) 
'8 hours'
</code></pre></div>
</dd>
<dt id="foss42.text.humanize.parse_dt"><code class="name flex">
<span>def <span class="ident">parse_dt</span></span>(<span>dt: str | datetime.datetime, fmt: str | None = None) ‑> datetime.datetime</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def parse_dt(dt: str | datetime,
             fmt: Optional[str] = None) -&gt; datetime:
    &#39;&#39;&#39;
    Parse a date in form of string or datetime object and returns it with timezone.
    &gt;&gt;&gt; parse_dt(&#39;2009-12-17T08:31:29&#39;)
    datetime.datetime(2009, 12, 17, 8, 31, 29, tzinfo=datetime.timezone.utc)
    &gt;&gt;&gt; parse_dt(&#39;2009-12-17T08:31:29Z&#39;)
    datetime.datetime(2009, 12, 17, 8, 31, 29, tzinfo=datetime.timezone.utc)
    &gt;&gt;&gt; parse_dt(&#39;2009-12-17T08:31:29+01:00&#39;)
    datetime.datetime(2009, 12, 17, 8, 31, 29, tzinfo=datetime.timezone(datetime.timedelta(seconds=3600)))
    &gt;&gt;&gt; parse_dt(datetime(2023, 3, 7, 14))
    datetime.datetime(2023, 3, 7, 14, 0, tzinfo=datetime.timezone.utc)
    &gt;&gt;&gt; parse_dt(&#34;14 Jan, 2023&#34;, &#34;%d %b, %Y&#34;)
    datetime.datetime(2023, 1, 14, 0, 0, tzinfo=datetime.timezone.utc)
    &#39;&#39;&#39;
    dt_val = None
    try:
        if type(dt) is str:
            if fmt is None:
                dt_val = datetime.fromisoformat(dt)
            else:
                dt_val = datetime.strptime(dt, fmt)
        elif isinstance(dt, datetime):
            dt_val = dt
        else:
            raise TypeError(&#34;Incorrect type of input date.&#34;)
        if dt_val.tzinfo is None:
            dt_val = dt_val.replace(tzinfo=timezone.utc)
    except Exception as e:
        raise ValueError(&#34;Error parsing input date.&#34;)
    return dt_val</code></pre>
</details>
<div class="desc"><p>Parse a date in form of string or datetime object and returns it with timezone.</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; parse_dt('2009-12-17T08:31:29')
datetime.datetime(2009, 12, 17, 8, 31, 29, tzinfo=datetime.timezone.utc)
&gt;&gt;&gt; parse_dt('2009-12-17T08:31:29Z')
datetime.datetime(2009, 12, 17, 8, 31, 29, tzinfo=datetime.timezone.utc)
&gt;&gt;&gt; parse_dt('2009-12-17T08:31:29+01:00')
datetime.datetime(2009, 12, 17, 8, 31, 29, tzinfo=datetime.timezone(datetime.timedelta(seconds=3600)))
&gt;&gt;&gt; parse_dt(datetime(2023, 3, 7, 14))
datetime.datetime(2023, 3, 7, 14, 0, tzinfo=datetime.timezone.utc)
&gt;&gt;&gt; parse_dt(&quot;14 Jan, 2023&quot;, &quot;%d %b, %Y&quot;)
datetime.datetime(2023, 1, 14, 0, 0, tzinfo=datetime.timezone.utc)
</code></pre></div>
</dd>
<dt id="foss42.text.humanize.remove_trailing_zeros"><code class="name flex">
<span>def <span class="ident">remove_trailing_zeros</span></span>(<span>num: str) ‑> str</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def remove_trailing_zeros(num: str) -&gt; str:
    &#34;&#34;&#34;
    &gt;&gt;&gt; remove_trailing_zeros(&#34;1.00&#34;)
    &#39;1&#39;
    &gt;&gt;&gt; remove_trailing_zeros(&#34;0.000000&#34;)
    &#39;0&#39;
    &gt;&gt;&gt; remove_trailing_zeros(&#34;0001.000000&#34;)
    &#39;0001&#39;
    &#34;&#34;&#34;

    match num.split(&#39;.&#39;):
        case [w]:
            pass
        case [w, d]:
            d = d.rstrip(&#39;0&#39;)
            d = f&#39;.{d}&#39; if len(d) &gt; 0 else &#34;&#34;
            num = f&#34;{w}{d}&#34;
    return num</code></pre>
</details>
<div class="desc"><pre><code class="language-python-repl">&gt;&gt;&gt; remove_trailing_zeros(&quot;1.00&quot;)
'1'
&gt;&gt;&gt; remove_trailing_zeros(&quot;0.000000&quot;)
'0'
&gt;&gt;&gt; remove_trailing_zeros(&quot;0001.000000&quot;)
'0001'
</code></pre></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="foss42.text" href="index.html">foss42.text</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="foss42.text.humanize.humanize_bytes" href="#foss42.text.humanize.humanize_bytes">humanize_bytes</a></code></li>
<li><code><a title="foss42.text.humanize.humanize_rank" href="#foss42.text.humanize.humanize_rank">humanize_rank</a></code></li>
<li><code><a title="foss42.text.humanize.humanize_social" href="#foss42.text.humanize.humanize_social">humanize_social</a></code></li>
<li><code><a title="foss42.text.humanize.humanize_time" href="#foss42.text.humanize.humanize_time">humanize_time</a></code></li>
<li><code><a title="foss42.text.humanize.parse_dt" href="#foss42.text.humanize.parse_dt">parse_dt</a></code></li>
<li><code><a title="foss42.text.humanize.remove_trailing_zeros" href="#foss42.text.humanize.remove_trailing_zeros">remove_trailing_zeros</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.6</a>.</p>
</footer>
</body>
</html>
